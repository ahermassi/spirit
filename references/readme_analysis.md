# SPIRIT Data Analysis and Visualization

All analysis runs offline using the CSV files generated by the [data collection](readme_data.md) step, without needing to run the docker container.

Ensure that your virtualenv has the [`requirements.txt`](../requirements.txt) dependencies installed.

The [`src/analysis`](../src/analysis) directory contains:

* [`csv_analysis.py`](../src/analysis/csv_analysis.py), a tool to properly load and parse the generated CSV files; it is not normally run directly.
* [`best_analysis.py`](../src/analysis/best_analysis.py), which performas a Bayesian Estimation Supercedes the *t* test (BEST) analysis.
Note that BEST is not deterministic, and rerunning it would likely yield different results.
This can be mitigated by increasing the number of simulations, and/or increasing burn-in, at the cost of increasing the time required to run the analysis.
* [`ttest_analysis.py`](../src/analysis/ttest_analysis.py), which perform a paired *t* test.

The output from the BEST and *t* test runs is stored in the [models](../models) directory.

By default, BEST is not run on the TLX and survey data because they are subjective measurements.
In addition, the Physical Demand component of the TLX result takes a very long time to converge under BEST due to most users rating it the same.
The *t* test is also not run on the analyses by default.
However, the code does exist, and an analysis of both can be run by uncommenting the relevant lines.

The [`src/visualization`](../src/visualization) directory contains:

* [`latexify.py`](../src/visualization/latexify.py), a lightweight `matplotlib` wrapper which allows easier figure generation and `.pgf` plot exporting.
* [`plot_tools.py`](../src/visualization/plot_tools.py), which provides convenience functions for the various types of plots to be generated.
* [`plot_thesis.py`](../src/visualization/plot_thesis.py), which creates the actual plots for the thesis.
By default, both PDF and PGF files are generated.
They are stored in the thesis's [`img/plots`](../reports/thesis/img/plots) directory.

Since all the code requires a `__main__` module to run, convenience scripts have been provided in [`run_best_analysis`](../src/analysis/run_best_analysis), [`run_ttest_analysis`](../src/analysis/run_ttest_analysis), and [`generate_thesis_plots`](../src/visualization/generate_thesis_plots).

## Does the experiment order matter?
[`csv_analysis.py`](../src/analysis/csv_analysis.py) flags each experiment as belonging to either Group 0 or Group 1.
Participants with an even ID number (starting from zero) were in Group 0, and did the onboard runs before using SPIRIT.
Similarly, Group 1 are the odd-numbered users who ran SPIRIT before the onboard test.

While it was not used in the thesis due to the low number of members in each group, this separation apears to show some potentially interesting patterns.
Some preliminary analysis is made in the [pre-analysis](../notebooks/03_pre-analysis.ipynb) notebook.
